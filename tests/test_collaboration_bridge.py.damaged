#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Tests for the 3-AI Collaboration Bridge
"""

import sys
import os
from pathlib import Path
import unittest

# Windows Unicode [EMOJI] [EMOJI] [EMOJI] [EMOJI]
if sys.platform == "win32":
    os.environ["PYTHONIOENCODING"] = "utf-8"
    if hasattr(sys.stdout, "reconfigure"):
        sys.stdout.reconfigure(encoding="utf-8")
        sys.stderr.reconfigure(encoding="utf-8")

# [EMOJI] [EMOJI]
sys.path.append(str(Path(__file__).parent.parent / "src"))

from src.collaboration_bridge import ThreeAICollaborationBridge


class TestThreeAICollaborationBridge(unittest.TestCase):

    def setUp(self):
        """Set up the test case."""
        self.bridge = ThreeAICollaborationBridge()

    def test_initialization(self):
        """Test that the bridge can be initialized."""
        self.assertIsNotNone(self.bridge)
        self.assertTrue(hasattr(self.bridge, "codex"))
        self.assertTrue(hasattr(self.bridge, "gemini"))

    def test_collaboration_implementation_pattern(self):
        """Test the collaboration with the implementation pattern."""
        task = "Create a user authentication system with JWT"
        pattern = "implementation"
        result = self.bridge.collaborate(task, pattern)

        self.assertIsNotNone(result)
        self.assertEqual(result["collaboration_pattern"], pattern)
        self.assertIn("status", result)
        self.assertIn("overall_confidence", result)

    def test_collaboration_ideation_pattern(self):
        """Test the collaboration with the ideation pattern."""
        task = "Design a scalable microservices architecture"
        pattern = "ideation"
        result = self.bridge.collaborate(task, pattern)

        self.assertIsNotNone(result)
        self.assertEqual(result["collaboration_pattern"], pattern)
        self.assertIn("status", result)
        self.assertIn("overall_confidence", result)


if __name__ == "__main__":
    unittest.main()
